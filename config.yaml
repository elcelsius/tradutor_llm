# Configuração centralizada — Tradução (PDF) + Desquebrar + Refine
# Recomendado para Light Novel (fantasia/RPG) com robustez de pipeline.

# Modelos de tradução (PDF -> PT)
translate_backend: ollama            # ollama ou gemini
translate_model: gemma3:27b-it-q4_K_M # modelo principal de tradução
translate_temperature: 0.55          # temperatura para tradução
translate_repeat_penalty: 1.10       # penalidade de repetição (ollama)
translate_chunk_chars: 2700          # tamanho alvo por chunk (caracteres)
translate_num_predict: 1800          # limite de tokens gerados por chunk

# Desquebrar (normaliza quebras antes de traduzir)
use_desquebrar: true                 # ativa desquebrar automaticamente para PDF
desquebrar_backend: ollama           # backend do desquebrar
desquebrar_model: gemma3:27b-it-q4_K_M # modelo usado no desquebrar
desquebrar_temperature: 0.08         # temperatura do desquebrar (baixa para não reescrever)
desquebrar_repeat_penalty: 1.08      # penalidade de repetição no desquebrar
desquebrar_chunk_chars: 2600         # chunk do desquebrar (pode ser um pouco maior que tradução)
desquebrar_num_predict: 1024         # limite de tokens gerados no desquebrar

# PDF (pós-refine)
pdf_enabled: false                   # gera PDF automaticamente após o refine (defina true para habilitar)
pdf_font:
  file: C:/Windows/Fonts/Aptos.ttf    # caminho da fonte principal (TTF/OTF)
  size: 12                            # tamanho base da fonte
  leading: 15.0                       # espaçamento entre linhas
pdf_font_fallbacks:
  - C:/Windows/Fonts/Arial.ttf
  - C:/Windows/Fonts/Tahoma.ttf
pdf_margin: 48                        # margens (pontos) em todas as bordas
pdf_author: ""                        # autor opcional no PDF
pdf_language: pt-BR                   # idioma do PDF

# Refine (pós-tradução)
refine_backend: ollama
refine_model: mistral-small3.1:24b-instruct-2503-q4_K_M
refine_temperature: 0.20
refine_repeat_penalty: 1.08
refine_chunk_chars: 2500
refine_num_predict: 1200
refine_guardrails: strict             # strict | relaxed | off

# Limpeza determinística antes do refine
cleanup_before_refine: auto           # off | auto | on

# Robustez de chamadas
max_retries: 3                        # tentativas para chamadas LLM
initial_backoff: 1.5                  # backoff inicial (s)
backoff_factor: 1.8                   # multiplicador de backoff
request_timeout: 180                  # timeout por chamada (s)

# Caminhos padrão
data_dir: data
output_dir: saida
font_dir: .cache/fonts
